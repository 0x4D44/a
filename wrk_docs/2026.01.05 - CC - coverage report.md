# Coverage Report - 2026.01.05

## Executive Summary
Current code coverage is approximately **86.2%** (lines) and **83.6%** (functions). To reach the **98%** target, we need to address specific gaps in legacy support, error handling, platform-specific path resolution, and CLI argument parsing.

## Detailed Analysis

### 1. Legacy Support Gaps
- **`AliasManager::execute_legacy_command_chain`**: This function is completely uncovered (0 hits). It handles old-style aliases containing `&&` strings.
- **`AliasManager::migrate_legacy_config`**: The branch handling `&&` inside legacy config migration is missed.

### 2. GitHub Integration Gaps
- **Token Resolution**: `AliasManager::github_token` checks environment variables (covered), but fallback methods (`gh` CLI, `git credential`) are completely uncovered.
- **Push/Pull Errors**: `push_config_to_github` and `pull_config_from_github` have uncovered error branches (e.g., backup creation failure, invalid JSON response).
- **CLI Parsing**: The `--push` command argument parsing loop in `main` is largely untested.

### 3. System Command Execution
- **`SystemCommandRunner::resolve_windows_program`**: Edge cases for empty `PATH` or `PATHEXT` are not fully exercised.
- **Error Handling**: `Command::status()` failure (e.g., program not found) is covered, but some specific error formatting paths might be missed.

### 4. Parallel Execution
- **`AliasManager::execute_parallel_chain`**: Thread panic handling and channel receive errors are uncovered.

### 5. CLI Entry Point (`main`)
- **Error Branches**: `unwrap` or `exit(1)` paths for failed initialization or unknown flags in subcommands (like `--help --bad-flag`) are missed.

## Recommendations
Refactoring `github_token` logic into a testable provider and adding targeted integration tests for legacy data and CLI edge cases will yield the biggest improvements.
